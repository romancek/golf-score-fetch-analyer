# 同伴者名表記ゆれマッピングファイル

## 概要

このファイルは、同伴者名の表記ゆれを統一するためのマッピングファイルです。

## ファイル形式

- **ファイル名**: `data/accompany_name_mapping.json`
- **形式**: JSON
- **構造**: `{ "表記ゆれ名": "正規化後の名前" }`

## 使い方

1. データ内で表記ゆれを発見したら、このファイルに追加します
2. キー（左側）に表記ゆれがある名前、値（右側）に統一したい正式名を記述します
3. 空文字列（`""`）を値に設定すると、その名前を除外できます

## 例

```json
{
  "山本": "山本太郎",
  "山本太郎": "山本太郎",
  "山本　太郎": "山本太郎",
  "山本 太郎": "山本太郎",
  "　": ""
}
```

## 表記ゆれの確認方法

以下のコマンドで現在のデータに含まれる同伴者名を確認できます：

```bash
cd /home/yuya-ono/work/repo/get-gdo-score
uv run python << 'EOF'
import polars as pl
from pathlib import Path

DATA_FILE = Path('data/scores_20160312-20251214.json')
df = pl.read_json(DATA_FILE)

all_names = []
for row in df.iter_rows(named=True):
    names = row.get('accompany_member_names', [])
    if names:
        all_names.extend(names)

unique_names = sorted(set(n for n in all_names if n))
print(f'同伴者名の総数: {len(all_names)}')
print(f'ユニークな同伴者名: {len(unique_names)}')
print()
print('同伴者名一覧:')
for name in unique_names:
    print(f'  {name}')

EOF
```

## 注意事項

- マッピングは部分一致ではなく完全一致で適用されます
- 同じ人物の表記は必ず1つの正式名に統一してください
- 空白や全角・半角の違いも別の名前として扱われます
